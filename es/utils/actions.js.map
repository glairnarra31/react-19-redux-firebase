{"version":3,"file":"actions.js","names":["wrapInDispatch","dispatch","_ref","meta","method","_ref$args","args","types","_types","_slicedToArray","requestingType","successType","errorType","type","_isObject2","default","payload","apply","_toConsumableArray","then","catch","err","Promise","reject","createWithFirebaseAndDispatch","firebase","dispatchFirst","func","_len","arguments","length","Array","_key","concat","mapWithFirebaseAndDispatch","actions","reverseActions","withFirebaseAndDispatch","withDispatchAndFirebase","_objectSpread","_mapValues2"],"sources":["../../src/utils/actions.js"],"sourcesContent":["import { isObject, mapValues } from 'lodash'\n\n/**\n * Wrap method call in dispatched actions\n * @param {Function} dispatch - Action dispatch function\n * @param {object} opts - Options object\n * @param {Function} opts.method - Method to call\n * @param {Array} opts.args - Arguments to call method with\n * @param {Array} opts.types - Action types array ([BEFORE, SUCCESS, FAILURE])\n * @param {object} opts.meta - Meta object\n * @returns {Promise} Resolves after method is called and success action is dispatched\n * @private\n */\nexport function wrapInDispatch(dispatch, { meta, method, args = [], types }) {\n  const [requestingType, successType, errorType] = types\n  dispatch({\n    type: isObject(requestingType) ? requestingType.type : requestingType,\n    meta,\n    payload: isObject(requestingType) ? requestingType.payload : { args }\n  })\n  return method(...args)\n    .then((payload) => {\n      dispatch({\n        type: isObject(successType) ? successType.type : successType,\n        meta,\n        payload: isObject(successType) ? successType.payload : payload\n      })\n      return payload\n    })\n    .catch((err) => {\n      dispatch({\n        type: errorType,\n        meta,\n        payload: err\n      })\n      return Promise.reject(err)\n    })\n}\n\n/**\n * Function that builds a factory that passes firebase and\n * dispatch as first two arguments.\n * @param {object} firebase - Internal firebase instance\n * @param {Function} dispatch - Redux's dispatch function\n * @param {boolean} dispatchFirst - Whether or not to have dispatch argument first\n * @returns {Function} A wrapper that accepts a function to wrap with firebase\n * and dispatch.\n */\nfunction createWithFirebaseAndDispatch(firebase, dispatch, dispatchFirst) {\n  return (func) => (...args) =>\n    func.apply(\n      firebase,\n      dispatchFirst\n        ? [dispatch, firebase, ...args]\n        : [firebase, dispatch, ...args]\n    )\n}\n\n/**\n * Map each action with Firebase and Dispatch. Includes aliasing of actions.\n * @param {object} firebase - Internal firebase instance\n * @param {Function} dispatch - Redux's dispatch function\n * @param {object} actions - Action functions to map with firebase and dispatch\n * @param {object} reverseActions - Action functions to map with dispatch and firebase (i.e. reverse arg order)\n * @returns {object} Actions mapped with firebase and dispatch\n */\nexport function mapWithFirebaseAndDispatch(\n  firebase,\n  dispatch,\n  actions,\n  reverseActions\n) {\n  const withFirebaseAndDispatch = createWithFirebaseAndDispatch(\n    firebase,\n    dispatch\n  )\n  const withDispatchAndFirebase = createWithFirebaseAndDispatch(\n    firebase,\n    dispatch,\n    true\n  )\n  return {\n    ...mapValues(actions, withFirebaseAndDispatch),\n    ...mapValues(reverseActions, withDispatchAndFirebase)\n  }\n}\n"],"mappings":"69GAaO,QAAS,CAAAA,cAAcA,CAACC,QAAQ,CAAAC,IAAA,CAAsC,IAAlC,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CAAAC,SAAA,CAAAH,IAAA,CAAEI,IAAI,CAAJA,IAAI,UAAAD,SAAA,CAAG,EAAE,CAAAA,SAAA,CAAEE,KAAK,CAAAL,IAAA,CAALK,KAAK,CAAAC,MAAA,CAAAC,cAAA,CACtBF,KAAK,IAA/CG,cAAc,CAAAF,MAAA,IAAEG,WAAW,CAAAH,MAAA,IAAEI,SAAS,CAAAJ,MAAA,IAM7C,MALA,CAAAP,QAAQ,CAAC,CACPY,IAAI,CAAE,GAAAC,UAAA,CAAAC,OAAA,EAASL,cAAc,CAAC,CAAGA,cAAc,CAACG,IAAI,CAAGH,cAAc,CACrEP,IAAI,CAAJA,IAAI,CACJa,OAAO,CAAE,GAAAF,UAAA,CAAAC,OAAA,EAASL,cAAc,CAAC,CAAGA,cAAc,CAACM,OAAO,CAAG,CAAEV,IAAI,CAAJA,IAAK,CACtE,CAAC,CAAC,CACKF,MAAM,CAAAa,KAAA,QAAAC,kBAAA,CAAIZ,IAAI,EAAC,CACnBa,IAAI,CAAC,SAACH,OAAO,CAAK,CAMjB,MALA,CAAAf,QAAQ,CAAC,CACPY,IAAI,CAAE,GAAAC,UAAA,CAAAC,OAAA,EAASJ,WAAW,CAAC,CAAGA,WAAW,CAACE,IAAI,CAAGF,WAAW,CAC5DR,IAAI,CAAJA,IAAI,CACJa,OAAO,CAAE,GAAAF,UAAA,CAAAC,OAAA,EAASJ,WAAW,CAAC,CAAGA,WAAW,CAACK,OAAO,CAAGA,OACzD,CAAC,CAAC,CACKA,OACT,CAAC,CAAC,CACDI,KAAK,CAAC,SAACC,GAAG,CAAK,CAMd,MALA,CAAApB,QAAQ,CAAC,CACPY,IAAI,CAAED,SAAS,CACfT,IAAI,CAAJA,IAAI,CACJa,OAAO,CAAEK,GACX,CAAC,CAAC,CACKC,OAAO,CAACC,MAAM,CAACF,GAAG,CAC3B,CAAC,CACL,CAWA,QAAS,CAAAG,6BAA6BA,CAACC,QAAQ,CAAExB,QAAQ,CAAEyB,aAAa,CAAE,CACxE,MAAO,UAACC,IAAI,QAAK,oBAAAC,IAAA,CAAAC,SAAA,CAAAC,MAAA,CAAIxB,IAAI,CAAAyB,KAAA,CAAAH,IAAA,EAAAI,IAAA,GAAAA,IAAA,CAAAJ,IAAA,CAAAI,IAAA,GAAJ1B,IAAI,CAAA0B,IAAA,EAAAH,SAAA,CAAAG,IAAA,QACvB,CAAAL,IAAI,CAACV,KAAK,CACRQ,QAAQ,CACRC,aAAa,EACRzB,QAAQ,CAAEwB,QAAQ,EAAAQ,MAAA,CAAK3B,IAAI,GAC3BmB,QAAQ,CAAExB,QAAQ,EAAAgC,MAAA,CAAK3B,IAAI,CAClC,CAAC,EACL,CAUO,QAAS,CAAA4B,0BAA0BA,CACxCT,QAAQ,CACRxB,QAAQ,CACRkC,OAAO,CACPC,cAAc,CACd,IACM,CAAAC,uBAAuB,CAAGb,6BAA6B,CAC3DC,QAAQ,CACRxB,QACF,CAAC,CACKqC,uBAAuB,CAAGd,6BAA6B,CAC3DC,QAAQ,CACRxB,QAAQ,GAEV,CAAC,CACD,OAAAsC,aAAA,CAAAA,aAAA,IACK,GAAAC,WAAA,CAAAzB,OAAA,EAAUoB,OAAO,CAAEE,uBAAuB,CAAC,EAC3C,GAAAG,WAAA,CAAAzB,OAAA,EAAUqB,cAAc,CAAEE,uBAAuB,CAAC,CAEzD","ignoreList":[]}